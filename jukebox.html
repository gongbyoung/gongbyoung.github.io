<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>랜덤 주크박스</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 40px; }
    #status { margin-top: 20px; font-size: 1.2em; color: red; }
  </style>
</head>
<body>
  <h1>🌸 꽃말 랜덤 주크박스 🌸</h1>
  <button id="playBtn">랜덤 재생</button>
  <div id="status"></div>

  <script>
    document.getElementById('playBtn').addEventListener('click', () => {
      fetch('files.json')
        .then(response => {
          if (!response.ok) throw new Error("파일 목록을 불러오지 못했습니다.");
          return response.json();
        })
        .then(files => {
          if (!files || files.length === 0) {
            document.getElementById('status').textContent = "🎵 재생할 MP3 파일이 없습니다.";
            return;
          }

          const randomFile = files[Math.floor(Math.random() * files.length)];
          const audio = new Audio(`mp3/${encodeURIComponent(randomFile)}`);
          audio.play();
          document.getElementById('status').textContent = `▶️ 재생 중: ${randomFile}`;
        })
        .catch(err => {
          document.getElementById('status').textContent = "🚫 파일 목록을 불러오는 중 오류 발생";
          console.error(err);
        });
    });
  </script>
</body>
</html>
