<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® ìŠ¤ë„ì¿  ê²Œì„ - ìˆ«ì í•˜ì´ë¼ì´íŠ¸</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            padding: 20px;
            color: #333;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .container::before {
            content: "";
            position: absolute;
            top: -50px;
            right: -50px;
            width: 200px;
            height: 200px;
            background: linear-gradient(45deg, #ff9a9e, #fad0c4);
            border-radius: 50%;
            opacity: 0.1;
            z-index: 0;
        }
        
        .container::after {
            content: "";
            position: absolute;
            bottom: -50px;
            left: -50px;
            width: 250px;
            height: 250px;
            background: linear-gradient(45deg, #a1c4fd, #c2e9fb);
            border-radius: 50%;
            opacity: 0.1;
            z-index: 0;
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }
        
        h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .subtitle {
            font-size: 1.1rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            position: relative;
            z-index: 1;
        }
        
        .board-section {
            flex: 1;
            min-width: 300px;
        }
        
        .controls-section {
            flex: 1;
            min-width: 300px;
        }
        
        .sudoku-board {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 1px;
            background: #2c3e50;
            border: 3px solid #2c3e50;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .cell {
            aspect-ratio: 1;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .cell.fixed {
            background: #f1f2f6;
            color: #2c3e50;
            font-weight: 700;
        }
        
        .cell.user-input {
            color: #3498db;
        }
        
        .cell.selected {
            background: #ffeaa7;
        }
        
        /* ê°™ì€ í–‰ í•˜ì´ë¼ì´íŠ¸ */
        .cell.row-highlight {
            background: #f0f8ff;
        }
        
        /* ê°™ì€ ì—´ í•˜ì´ë¼ì´íŠ¸ */
        .cell.col-highlight {
            background: #f0f8ff;
        }
        
        /* ê°™ì€ ìˆ«ì í•˜ì´ë¼ì´íŠ¸ */
        .cell.number-highlight {
            background: #b3e0ff;
        }
        
        /* ê°™ì€ 3x3 ë°•ìŠ¤ í•˜ì´ë¼ì´íŠ¸ */
        .cell.box-highlight {
            background: #e0f7fa;
        }
        
        .cell.error {
            color: #e74c3c;
        }
        
        .cell:nth-child(3n):not(:nth-child(9n)) {
            border-right: 2px solid #2c3e50;
        }
        
        .cell:nth-child(n+19):nth-child(-n+27),
        .cell:nth-child(n+46):nth-child(-n+54) {
            border-bottom: 2px solid #2c3e50;
        }
        
        .number-pad {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .number-btn {
            aspect-ratio: 1;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }
        
        .number-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .number-btn:active {
            transform: translateY(1px);
        }
        
        .number-btn.clear {
            background: #e74c3c;
            grid-column: span 2;
            aspect-ratio: unset;
        }
        
        .number-btn.clear:hover {
            background: #c0392b;
        }
        
        .number-btn.hint {
            background: #2ecc71;
            grid-column: span 2;
            aspect-ratio: unset;
        }
        
        .number-btn.hint:hover {
            background: #27ae60;
        }
        
        .control-panel {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }
        
        .difficulty-selector {
            margin-bottom: 25px;
        }
        
        .difficulty-selector h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .difficulty-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .difficulty-btn {
            flex: 1;
            padding: 12px;
            background: #ecf0f1;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .difficulty-btn:hover {
            background: #d5dbdb;
        }
        
        .difficulty-btn.active {
            background: #3498db;
            color: white;
        }
        
        .game-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 25px 0;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .stat-card h4 {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        
        .stat-card .value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .game-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .game-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.2s ease;
        }
        
        .game-btn.new {
            background: #9b59b6;
            color: white;
        }
        
        .game-btn.new:hover {
            background: #8e44ad;
        }
        
        .game-btn.check {
            background: #f39c12;
            color: white;
        }
        
        .game-btn.check:hover {
            background: #d35400;
        }
        
        .game-btn.solve {
            background: #2ecc71;
            color: white;
        }
        
        .game-btn.solve:hover {
            background: #27ae60;
        }
        
        .message {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            border-radius: 8px;
            font-weight: 600;
        }
        
        .highlight-info {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 0.9rem;
        }
        
        .highlight-info ul {
            list-style-type: none;
            padding: 10px 0;
        }
        
        .highlight-info li {
            margin: 8px 0;
            display: flex;
            align-items: center;
        }
        
        .highlight-info .color-box {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border-radius: 3px;
        }
        
        .message.success {
            background: rgba(46, 204, 113, 0.2);
            color: #27ae60;
        }
        
        .message.error {
            background: rgba(231, 76, 60, 0.2);
            color: #c0392b;
        }
        
        .message.generating {
            background: rgba(155, 89, 182, 0.2);
            color: #8e44ad;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            color: #7f8c8d;
            font-size: 0.9rem;
            position: relative;
            z-index: 1;
        }
        
        @media (max-width: 768px) {
            .game-container {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ® ìŠ¤ë„ì¿  ê²Œì„</h1>
            <p class="subtitle">ìˆ«ì ì„ íƒ ì‹œ ê°™ì€ í–‰, ì—´, ìˆ«ì í•˜ì´ë¼ì´íŠ¸ ê¸°ëŠ¥ ì¶”ê°€</p>
        </header>
        
        <div class="game-container">
            <div class="board-section">
                <div class="sudoku-board" id="sudoku-board"></div>
                
                <div class="number-pad">
                    <button class="number-btn" data-number="1">1</button>
                    <button class="number-btn" data-number="2">2</button>
                    <button class="number-btn" data-number="3">3</button>
                    <button class="number-btn" data-number="4">4</button>
                    <button class="number-btn" data-number="5">5</button>
                    <button class="number-btn" data-number="6">6</button>
                    <button class="number-btn" data-number="7">7</button>
                    <button class="number-btn" data-number="8">8</button>
                    <button class="number-btn" data-number="9">9</button>
                    <button class="number-btn clear" id="clear-btn">ì§€ìš°ê¸°</button>
                    <button class="number-btn hint" id="hint-btn">íŒíŠ¸ ë³´ê¸°</button>
                </div>
            </div>
            
            <div class="controls-section">
                <div class="control-panel">
                    <div class="difficulty-selector">
                        <h3>ë‚œì´ë„ ì„ íƒ</h3>
                        <div class="difficulty-buttons">
                            <button class="difficulty-btn active" data-difficulty="easy">ì‰¬ì›€</button>
                            <button class="difficulty-btn" data-difficulty="medium">ì¤‘ê°„</button>
                            <button class="difficulty-btn" data-difficulty="hard">ì–´ë ¤ì›€</button>
                            <button class="difficulty-btn" data-difficulty="expert">ì „ë¬¸ê°€</button>
                        </div>
                    </div>
                    
                    <div class="game-stats">
                        <div class="stat-card">
                            <h4>ì‹œê°„</h4>
                            <div class="value" id="timer">00:00</div>
                        </div>
                        <div class="stat-card">
                            <h4>íŒíŠ¸ ì‚¬ìš©</h4>
                            <div class="value"><span id="hints-used">0</span>/3</div>
                        </div>
                        <div class="stat-card">
                            <h4>ì˜¤ë¥˜</h4>
                            <div class="value" id="errors">0</div>
                        </div>
                        <div class="stat-card">
                            <h4>ì§„í–‰ë¥ </h4>
                            <div class="value" id="progress">0%</div>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <button class="game-btn new" id="new-game-btn">ìƒˆ ê²Œì„</button>
                        <button class="game-btn check" id="check-btn">ì •ë‹µ í™•ì¸</button>
                        <button class="game-btn solve" id="solve-btn">ì •ë‹µ ë³´ê¸°</button>
                    </div>
                </div>
                
                <div class="message" id="message">
                    ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”! ìˆ«ìë¥¼ í´ë¦­í•˜ê³  ì…ë ¥í•˜ì‹­ì‹œì˜¤.
                </div>
                
                <div class="highlight-info">
                    <h3>í•˜ì´ë¼ì´íŠ¸ ê°€ì´ë“œ</h3>
                    <ul>
                        <li><span class="color-box" style="background-color: #ffeaa7;"></span> ì„ íƒí•œ ì…€</li>
                        <li><span class="color-box" style="background-color: #f0f8ff;"></span> ê°™ì€ í–‰/ì—´ ì…€</li>
                        <li><span class="color-box" style="background-color: #e0f7fa;"></span> ê°™ì€ 3x3 ë°•ìŠ¤</li>
                        <li><span class="color-box" style="background-color: #b3e0ff;"></span> ê°™ì€ ìˆ«ì</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <footer>
            <p>ìŠ¤ë„ì¿  ê²Œì„ - ìˆ«ì í•˜ì´ë¼ì´íŠ¸ ê¸°ëŠ¥ í¬í•¨ | ìˆ«ìì•¼êµ¬ ë‹¤ìŒ ë ˆë²¨</p>
        </footer>
    </div>

    <script>
        // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let board = [];
        let solution = [];
        let initialBoard = [];
        let selectedCell = null;
        let timerInterval = null;
        let seconds = 0;
        let errors = 0;
        let hintsUsed = 0;
        let gameCompleted = false;
        let difficulty = 'medium';
        
        // DOM ìš”ì†Œ
        const boardElement = document.getElementById('sudoku-board');
        const timerElement = document.getElementById('timer');
        const hintsUsedElement = document.getElementById('hints-used');
        const errorsElement = document.getElementById('errors');
        const progressElement = document.getElementById('progress');
        const messageElement = document.getElementById('message');
        
        // ëœë¤ í¼ì¦ ìƒì„± ì•Œê³ ë¦¬ì¦˜
        function generateRandomSudoku() {
            // 9x9 ë¹ˆ ë³´ë“œ ìƒì„±
            const newBoard = Array(9).fill().map(() => Array(9).fill(0));
            
            // ë°±íŠ¸ë˜í‚¹ì„ ì‚¬ìš©í•˜ì—¬ ìœ íš¨í•œ ìŠ¤ë„ì¿  ë³´ë“œ ìƒì„±
            solveSudoku(newBoard);
            
            // ìƒì„±ëœ ë³´ë“œê°€ ì •ë‹µ ë³´ë“œê°€ ë¨
            solution = JSON.parse(JSON.stringify(newBoard));
            
            // ë‚œì´ë„ì— ë”°ë¼ ì¼ë¶€ ìˆ«ì ì œê±°
            const emptyCells = difficulty === 'easy' ? 35 : 
                             difficulty === 'medium' ? 45 : 
                             difficulty === 'hard' ? 55 : 60;
            
            // ìˆ«ì ì œê±° (í¼ì¦ ìƒì„±)
            for (let i = 0; i < emptyCells; i++) {
                const row = Math.floor(Math.random() * 9);
                const col = Math.floor(Math.random() * 9);
                
                // ì´ë¯¸ ë¹„ì–´ìˆëŠ” ê²½ìš° ê±´ë„ˆëœ€
                if (newBoard[row][col] === 0) {
                    i--;
                    continue;
                }
                
                // ìˆ«ì ì œê±° ì „ ë³µì‚¬
                const temp = newBoard[row][col];
                newBoard[row][col] = 0;
                
                // ìœ ì¼í•œ í•´ê°€ ìˆëŠ”ì§€ í™•ì¸
                const testBoard = JSON.parse(JSON.stringify(newBoard));
                if (!hasUniqueSolution(testBoard)) {
                    // ìœ ì¼í•œ í•´ê°€ ì•„ë‹ˆë©´ ë³µì›
                    newBoard[row][col] = temp;
                    i--;
                }
            }
            
            return newBoard;
        }
        
        // ìŠ¤ë„ì¿  í•´ê²° (ë°±íŠ¸ë˜í‚¹)
        function solveSudoku(board) {
            const emptyCell = findEmptyCell(board);
            if (!emptyCell) return true; // ëª¨ë“  ì…€ì´ ì±„ì›Œì§
            
            const [row, col] = emptyCell;
            
            // 1-9 ìˆ«ìë¥¼ ë¬´ì‘ìœ„ ìˆœì„œë¡œ ì‹œë„
            const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9];
            shuffleArray(numbers);
            
            for (const num of numbers) {
                if (isValidMove(board, row, col, num)) {
                    board[row][col] = num;
                    
                    if (solveSudoku(board)) {
                        return true;
                    }
                    
                    board[row][col] = 0; // ë°±íŠ¸ë˜í‚¹
                }
            }
            
            return false; // í•´ê²° ë¶ˆê°€
        }
        
        // ë¹ˆ ì…€ ì°¾ê¸°
        function findEmptyCell(board) {
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (board[row][col] === 0) {
                        return [row, col];
                    }
                }
            }
            return null;
        }
        
        // ìœ íš¨í•œ ì´ë™ì¸ì§€ í™•ì¸
        function isValidMove(board, row, col, num) {
            // í–‰ í™•ì¸
            for (let i = 0; i < 9; i++) {
                if (board[row][i] === num) return false;
            }
            
            // ì—´ í™•ì¸
            for (let i = 0; i < 9; i++) {
                if (board[i][col] === num) return false;
            }
            
            // 3x3 ë°•ìŠ¤ í™•ì¸
            const boxRowStart = Math.floor(row / 3) * 3;
            const boxColStart = Math.floor(col / 3) * 3;
            
            for (let r = boxRowStart; r < boxRowStart + 3; r++) {
                for (let c = boxColStart; c < boxColStart + 3; c++) {
                    if (board[r][c] === num) return false;
                }
            }
            
            return true;
        }
        
        // ë°°ì—´ ì…”í”Œ
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // ìœ ì¼í•œ í•´ í™•ì¸
        function hasUniqueSolution(board) {
            const boardCopy = JSON.parse(JSON.stringify(board));
            let solutionCount = 0;
            
            function countSolutions(board) {
                const emptyCell = findEmptyCell(board);
                if (!emptyCell) {
                    solutionCount++;
                    return;
                }
                
                const [row, col] = emptyCell;
                
                for (let num = 1; num <= 9; num++) {
                    if (solutionCount > 1) return; // 2ê°œ ì´ìƒì˜ í•´ë¥¼ ì°¾ìœ¼ë©´ ì¤‘ë‹¨
                    
                    if (isValidMove(board, row, col, num)) {
                        board[row][col] = num;
                        countSolutions(board);
                        board[row][col] = 0;
                    }
                }
            }
            
            countSolutions(boardCopy);
            return solutionCount === 1;
        }
        
        // ê²Œì„ ì´ˆê¸°í™”
        function initGame() {
            // ê¸°ì¡´ ê²Œì„ ìƒíƒœ ì´ˆê¸°í™”
            clearInterval(timerInterval);
            seconds = 0;
            errors = 0;
            hintsUsed = 0;
            gameCompleted = false;
            selectedCell = null;
            
            // ìƒíƒœ í‘œì‹œ ì—…ë°ì´íŠ¸
            timerElement.textContent = '00:00';
            errorsElement.textContent = errors;
            hintsUsedElement.textContent = hintsUsed;
            progressElement.textContent = '0%';
            messageElement.textContent = 'í¼ì¦ ìƒì„± ì¤‘...';
            messageElement.className = 'message generating';
            
            // ì ì‹œ í›„ í¼ì¦ ìƒì„± (ì‚¬ìš©ì ê²½í—˜ ê°œì„ )
            setTimeout(() => {
                // ëœë¤ ìŠ¤ë„ì¿  í¼ì¦ ìƒì„±
                board = generateRandomSudoku();
                initialBoard = JSON.parse(JSON.stringify(board));
                
                // ë³´ë“œ ë Œë”ë§
                renderBoard();
                
                // ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
                messageElement.textContent = 'ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”! ìˆ«ìë¥¼ í´ë¦­í•˜ê³  ì…ë ¥í•˜ì‹­ì‹œì˜¤.';
                messageElement.className = 'message';
                
                // íƒ€ì´ë¨¸ ì‹œì‘
                timerInterval = setInterval(updateTimer, 1000);
            }, 100);
        }
        
        // ë³´ë“œ ë Œë”ë§
        function renderBoard() {
            boardElement.innerHTML = '';
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    const cellValue = board[row][col];
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    
                    // ê³ ì •ëœ ì…€ê³¼ ì‚¬ìš©ì ì…ë ¥ ì…€ êµ¬ë¶„
                    if (initialBoard[row][col] !== 0) {
                        cell.classList.add('fixed');
                        cell.textContent = cellValue;
                    } else if (cellValue !== 0) {
                        cell.classList.add('user-input');
                        cell.textContent = cellValue;
                    }
                    
                    // ì…€ ì„ íƒ ì´ë²¤íŠ¸
                    cell.addEventListener('click', () => selectCell(row, col));
                    
                    boardElement.appendChild(cell);
                }
            }
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateProgress();
        }
        
        // ì…€ ì„ íƒ
        function selectCell(row, col) {
            // ëª¨ë“  í•˜ì´ë¼ì´íŠ¸ ì œê±°
            document.querySelectorAll('.cell').forEach(cell => {
                cell.classList.remove(
                    'selected', 
                    'row-highlight', 
                    'col-highlight', 
                    'number-highlight', 
                    'box-highlight'
                );
            });
            
            // ìƒˆ ì…€ ì„ íƒ
            selectedCell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
            selectedCell.classList.add('selected');
            
            // ê°™ì€ í–‰ í•˜ì´ë¼ì´íŠ¸
            highlightRow(row);
            
            // ê°™ì€ ì—´ í•˜ì´ë¼ì´íŠ¸
            highlightCol(col);
            
            // ê°™ì€ 3x3 ë°•ìŠ¤ í•˜ì´ë¼ì´íŠ¸
            highlightBox(row, col);
            
            // ê°™ì€ ìˆ«ì í•˜ì´ë¼ì´íŠ¸
            highlightSameNumbers(row, col);
            
            messageElement.textContent = `${row + 1}í–‰ ${col + 1}ì—´ ì„ íƒë¨`;
        }
        
        // ê°™ì€ í–‰ í•˜ì´ë¼ì´íŠ¸
        function highlightRow(row) {
            for (let col = 0; col < 9; col++) {
                const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
                cell.classList.add('row-highlight');
            }
        }
        
        // ê°™ì€ ì—´ í•˜ì´ë¼ì´íŠ¸
        function highlightCol(col) {
            for (let row = 0; row < 9; row++) {
                const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
                cell.classList.add('col-highlight');
            }
        }
        
        // ê°™ì€ 3x3 ë°•ìŠ¤ í•˜ì´ë¼ì´íŠ¸
        function highlightBox(row, col) {
            const boxRowStart = Math.floor(row / 3) * 3;
            const boxColStart = Math.floor(col / 3) * 3;
            
            for (let r = boxRowStart; r < boxRowStart + 3; r++) {
                for (let c = boxColStart; c < boxColStart + 3; c++) {
                    const cell = document.querySelector(`.cell[data-row="${r}"][data-col="${c}"]`);
                    cell.classList.add('box-highlight');
                }
            }
        }
        
        // ê°™ì€ ìˆ«ì í•˜ì´ë¼ì´íŠ¸
        function highlightSameNumbers(row, col) {
            const value = board[row][col];
            if (value === 0) return; // ë¹ˆ ì…€ì€ ê±´ë„ˆëœ€
            
            for (let r = 0; r < 9; r++) {
                for (let c = 0; c < 9; c++) {
                    if (board[r][c] === value) {
                        const cell = document.querySelector(`.cell[data-row="${r}"][data-col="${c}"]`);
                        cell.classList.add('number-highlight');
                    }
                }
            }
        }
        
        // ì…€ì— ìˆ«ì ì…ë ¥
        function inputNumber(number) {
            if (!selectedCell || gameCompleted) return;
            
            const row = parseInt(selectedCell.dataset.row);
            const col = parseInt(selectedCell.dataset.col);
            
            // ê³ ì •ëœ ì…€ì€ ë³€ê²½ ë¶ˆê°€
            if (initialBoard[row][col] !== 0) return;
            
            // ìˆ«ì ì…ë ¥
            board[row][col] = number;
            
            // ì •ë‹µ í™•ì¸
            if (number !== 0) {
                const isCorrect = (number === solution[row][col]);
                
                if (!isCorrect) {
                    selectedCell.classList.add('error');
                    errors++;
                    errorsElement.textContent = errors;
                    messageElement.textContent = 'í‹€ë ¸ìŠµë‹ˆë‹¤! ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.';
                    messageElement.className = 'message error';
                } else {
                    selectedCell.classList.remove('error');
                    messageElement.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ê³„ì† ì§„í–‰í•˜ì„¸ìš”.';
                    messageElement.className = 'message';
                }
                
                selectedCell.textContent = number;
                selectedCell.classList.add('user-input');
            } else {
                // ìˆ«ì ì œê±° (0 ì…ë ¥)
                selectedCell.textContent = '';
                selectedCell.classList.remove('user-input', 'error');
                messageElement.textContent = 'ìˆ«ìê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.';
                messageElement.className = 'message';
            }
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateProgress();
            
            // ê²Œì„ ì™„ë£Œ ì—¬ë¶€ í™•ì¸
            checkGameCompletion();
        }
        
        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateProgress() {
            let filled = 0;
            let total = 0;
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (initialBoard[row][col] === 0) {
                        total++;
                        if (board[row][col] !== 0) {
                            filled++;
                        }
                    }
                }
            }
            
            const progress = total > 0 ? Math.round((filled / total) * 100) : 100;
            progressElement.textContent = `${progress}%`;
        }
        
        // ê²Œì„ ì™„ë£Œ ì—¬ë¶€ í™•ì¸
        function checkGameCompletion() {
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    if (board[row][col] !== solution[row][col]) {
                        return false;
                    }
                }
            }
            
            // ê²Œì„ ì™„ë£Œ
            gameCompleted = true;
            clearInterval(timerInterval);
            
            messageElement.textContent = `ì¶•í•˜í•©ë‹ˆë‹¤! ìŠ¤ë„ì¿ ë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤! (ì‹œê°„: ${timerElement.textContent})`;
            messageElement.className = 'message success';
            
            return true;
        }
        
        // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        function updateTimer() {
            seconds++;
            const minutes = Math.floor(seconds / 60).toString().padStart(2, '0');
            const secs = (seconds % 60).toString().padStart(2, '0');
            timerElement.textContent = `${minutes}:${secs}`;
        }
        
        // íŒíŠ¸ ë³´ì—¬ì£¼ê¸°
        function showHint() {
            if (!selectedCell || gameCompleted || hintsUsed >= 3) return;
            
            const row = parseInt(selectedCell.dataset.row);
            const col = parseInt(selectedCell.dataset.col);
            
            // ì´ë¯¸ ì •ë‹µì´ê±°ë‚˜ ê³ ì •ëœ ì…€ì€ ê±´ë„ˆëœ€
            if (board[row][col] === solution[row][col] || initialBoard[row][col] !== 0) {
                messageElement.textContent = 'ì´ ì…€ì€ íŒíŠ¸ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
                messageElement.className = 'message';
                return;
            }
            
            // íŒíŠ¸ ë³´ì—¬ì£¼ê¸°
            const hint = solution[row][col];
            board[row][col] = hint;
            selectedCell.textContent = hint;
            selectedCell.classList.add('user-input');
            selectedCell.classList.remove('error');
            
            hintsUsed++;
            hintsUsedElement.textContent = hintsUsed;
            
            messageElement.textContent = `íŒíŠ¸: ${row + 1}í–‰ ${col + 1}ì—´ì€ ${hint}ì…ë‹ˆë‹¤.`;
            messageElement.className = 'message';
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateProgress();
            
            // ê²Œì„ ì™„ë£Œ ì—¬ë¶€ í™•ì¸
            checkGameCompletion();
        }
        
        // ì •ë‹µ í™•ì¸
        function checkSolution() {
            if (gameCompleted) return;
            
            let hasError = false;
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
                    
                    if (board[row][col] !== 0 && board[row][col] !== solution[row][col]) {
                        cell.classList.add('error');
                        hasError = true;
                    } else {
                        cell.classList.remove('error');
                    }
                }
            }
            
            if (hasError) {
                messageElement.textContent = 'ì•„ì§ ì˜¤ë‹µì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.';
                messageElement.className = 'message error';
            } else if (checkGameCompletion()) {
                messageElement.textContent = `ì¶•í•˜í•©ë‹ˆë‹¤! ìŠ¤ë„ì¿ ë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤! (ì‹œê°„: ${timerElement.textContent})`;
                messageElement.className = 'message success';
            } else {
                messageElement.textContent = 'ì•„ì§ í’€ì§€ ì•Šì€ ì…€ì´ ìˆì§€ë§Œ ì˜¤ë¥˜ëŠ” ì—†ìŠµë‹ˆë‹¤.';
                messageElement.className = 'message';
            }
        }
        
        // ì •ë‹µ ë³´ì—¬ì£¼ê¸°
        function showSolution() {
            if (gameCompleted) return;
            
            clearInterval(timerInterval);
            gameCompleted = true;
            
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
                    board[row][col] = solution[row][col];
                    
                    if (initialBoard[row][col] === 0) {
                        cell.textContent = solution[row][col];
                        cell.classList.add('user-input');
                    }
                }
            }
            
            progressElement.textContent = '100%';
            messageElement.textContent = 'ì •ë‹µì„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤. ìƒˆ ê²Œì„ì„ ì‹œì‘í•´ë³´ì„¸ìš”!';
            messageElement.className = 'message';
        }
        
        // ì…€ ì§€ìš°ê¸°
        function clearCell() {
            inputNumber(0);
        }
        
        // ë‚œì´ë„ ë³€ê²½
        function setDifficulty(level) {
            difficulty = level;
            
            // í™œì„±í™”ëœ ë²„íŠ¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.difficulty-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ìƒˆ ê²Œì„ ì‹œì‘
            initGame();
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        document.querySelectorAll('.number-btn').forEach(btn => {
            if (!btn.classList.contains('clear') && !btn.classList.contains('hint')) {
                btn.addEventListener('click', () => {
                    const number = parseInt(btn.dataset.number);
                    inputNumber(number);
                });
            }
        });
        
        document.getElementById('clear-btn').addEventListener('click', clearCell);
        document.getElementById('hint-btn').addEventListener('click', showHint);
        document.getElementById('new-game-btn').addEventListener('click', initGame);
        document.getElementById('check-btn').addEventListener('click', checkSolution);
        document.getElementById('solve-btn').addEventListener('click', showSolution);
        document.querySelectorAll('.difficulty-btn').forEach(btn => {
            btn.addEventListener('click', (e) => setDifficulty(e.target.dataset.difficulty));
        });
        
        // í‚¤ë³´ë“œ ì…ë ¥ ì§€ì›
        document.addEventListener('keydown', (e) => {
            if (!selectedCell || gameCompleted) return;
            
            const key = e.key;
            
            if (key >= '1' && key <= '9') {
                inputNumber(parseInt(key));
            } else if (key === '0' || key === 'Backspace' || key === 'Delete') {
                clearCell();
            } else if (key === 'h' || key === 'H') {
                showHint();
            }
        });
        
        // ê²Œì„ ì‹œì‘
        initGame();
    </script>
</body>
</html>